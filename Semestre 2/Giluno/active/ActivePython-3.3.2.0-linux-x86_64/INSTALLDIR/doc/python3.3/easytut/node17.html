<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2K.1beta (1.48)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>File IO</TITLE>
<META NAME="description" CONTENT="File IO">
<META NAME="keywords" CONTENT="easytut">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v2K.1beta">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="easytut.css">

<LINK REL="next" HREF="node18.html">
<LINK REL="previous" HREF="node16.html">
<LINK REL="up" HREF="easytut.html">
<LINK REL="next" HREF="node18.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html372"
  HREF="node18.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html368"
  HREF="easytut.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html362"
  HREF="node16.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html370"
  HREF="node2.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html373"
  HREF="node18.html">Dealing with the imperfect</A>
<B> Up:</B> <A NAME="tex2html369"
  HREF="easytut.html">Non-Programmers Tutorial For Python</A>
<B> Previous:</B> <A NAME="tex2html363"
  HREF="node16.html">Revenge of the Strings</A>
 &nbsp <B>  <A NAME="tex2html371"
  HREF="node2.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsections</STRONG></A>

<UL>
<LI><A NAME="tex2html374"
  HREF="#SECTION001710000000000000000">Exercises</A>
</UL>
<!--End of Table of Child-Links-->
<HR>

<H1><A NAME="SECTION001700000000000000000">
File IO</A>
</H1>
Here is a simple example of file IO:
<PRE>
#Write a file
out_file = open("test.txt","w")
out_file.write("This Text is going to out file\nLook at it and see\n")
out_file.close()

#Read a file
in_file = open("test.txt","r")
text = in_file.read()
in_file.close()

print text,
</PRE>
The output and the contents of the file test.txt are:
<PRE>
This Text is going to out file
Look at it and see
</PRE>
Notice that it wrote a file called test.txt in the directory that you ran the program from.  The <code>\n</code> in the string tells Python to put a <B>n</B>ewline where it is.  

<P>
A overview of file IO is:

<OL>
<LI>Get a file object with the <code>open</code> function.
</LI>
<LI>Read or write to the file object (depending on how it was opened)
</LI>
<LI>Close it
</LI>
</OL>

<P>
The first step is to get a file object.  The way to do this is to use the <code>open</code> function.  The format is <code>file_object = open(filename,mode)</code>  where <code>file_object</code> is the variable to put the file object, <code>filename</code> is a string with the filename, and <code>mode</code> is either <code>"r"</code> to <B>r</B>ead a file or <code>"w"</code> to <B>w</B>rite a file.  Next the file objects functions can be called.  The two most common functions are <code>read</code> and <code>write</code>.  The <code>write</code> function adds a string to the end of the file.  The <code>read</code> function reads the next thing in the file and returns it as a string.  If no argument is given it will return the whole file (as done in the example).  

<P>
Now here is a new version of the phone numbers program that we made earlier:
<PRE>
import string

true = 1
false = 0

def print_numbers(numbers):
    print "Telephone Numbers:"
    for x in numbers.keys():
        print "Name: ",x," \tNumber: ",numbers[x]
    print

def add_number(numbers,name,number):
    numbers[name] = number

def lookup_number(numbers,name):
    if numbers.has_key(name):
        return "The number is "+numbers[name]
    else:
        return name+" was not found"

def remove_number(numbers,name):
    if numbers.has_key(name):
        del numbers[name]
    else:
        print name," was not found"


def load_numbers(numbers,filename):
    in_file = open(filename,"r")
    while true:
        in_line = in_file.readline()
        if in_line == "":
            break
        in_line = in_line[:-1]
        [name,number] = string.split(in_line,",")
        numbers[name] = number
    in_file.close()

def save_numbers(numbers,filename):
    out_file = open(filename,"w")
    for x in numbers.keys():
        out_file.write(x+","+numbers[x]+"\n")
    out_file.close()
    

def print_menu():
    print '1. Print Phone Numbers'
    print '2. Add a Phone Number'
    print '3. Remove a Phone Number'
    print '4. Lookup a Phone Number'
    print '5. Load numbers'
    print '6. Save numbers'
    print '7. Quit'
    print
</PRE>
<PRE>
phone_list = {}
menu_choice = 0
print_menu()
while menu_choice != 7:
    menu_choice = input("Type in a number (1-7):")
    if menu_choice == 1:
        print_numbers(phone_list)
    elif menu_choice == 2:
        print "Add Name and Number"
        name = raw_input("Name:")
        phone = raw_input("Number:")
        add_number(phone_list,name,phone)
    elif menu_choice == 3:
        print "Remove Name and Number"
        name = raw_input("Name:")
        remove_number(phone_list,name)
    elif menu_choice == 4:
        print "Lookup Number"
        name = raw_input("Name:")
        print lookup_number(phone_list,name)
    elif menu_choice == 5:
        filename = raw_input("Filename to load:")
        load_numbers(phone_list,filename)
    elif menu_choice == 6:
        filename = raw_input("Filename to save:")
        save_numbers(phone_list,filename)
    elif menu_choice == 7:
        pass
    else:
        print_menu()
print "Goodbye"
</PRE>
Notice that it now includes saving and loading files.  Here is some output of my running it twice:
<PRE>
&gt; python tele2.py
1. Print Phone Numbers
2. Add a Phone Number
3. Remove a Phone Number
4. Lookup a Phone Number
5. Load numbers
6. Save numbers
7. Quit

Type in a number (1-7):2
Add Name and Number
Name:Jill
Number:1234
Type in a number (1-7):2
Add Name and Number
Name:Fred 
Number:4321
Type in a number (1-7):1
Telephone Numbers:
Name:  Jill     Number:  1234
Name:  Fred     Number:  4321

Type in a number (1-7):6
Filename to save:numbers.txt
Type in a number (1-7):7
Goodbye
</PRE>
<PRE>
&gt; python tele2.py
1. Print Phone Numbers
2. Add a Phone Number
3. Remove a Phone Number
4. Lookup a Phone Number
5. Load numbers
6. Save numbers
7. Quit

Type in a number (1-7):5
Filename to load:numbers.txt
Type in a number (1-7):1
Telephone Numbers:
Name:  Jill     Number:  1234
Name:  Fred     Number:  4321

Type in a number (1-7):7
Goodbye
</PRE>

<P>
The new portions of this program are:
<PRE>
def load_numbers(numbers,filename):
    in_file = open(filename,"r")
    while 1:
        in_line = in_file.readline()
        if len(in_line) == 0:
            break
        in_line = in_line[:-1]
        [name,number] = string.split(in_line,",")
        numbers[name] = number
    in_file.close()
</PRE>
<PRE>
def save_numbers(numbers,filename):
    out_file = open(filename,"w")
    for x in numbers.keys():
        out_file.write(x+","+numbers[x]+"\n")
    out_file.close()
</PRE>

<P>
First we will look at the save portion of the program.  First it creates a file object with the command <code>open(filename,"w")</code>.  Next it goes through and creates a line for each of the phone numbers with the command <code>out_file.write(x+","+numbers[x]+"\n")</code>.  This writes out a line that contains the name, a comma, the number and follows it by a newline.

<P>
The loading portion is a little more complicated.  It starts by getting a file object.  Then it uses a <code>while 1:</code> loop to keep looping until a <code>break</code> statement is encountered.  Next it gets a line with the line <code>in_line = in_file.readline()</code>.  The <code>readline</code> function will return a empty string (len(string) == 0) when the end of the file is reached.  The <code>if</code> statement checks for this and <code>break</code>s out of the <code>while</code> loop when that happens.  Of course if the <code>readline</code> function did not return the newline at the end of the line there would be no way to tell if an empty string was an empty line or the end of the file so the newline is left in what <code>readline</code> returns.  Hence we have to get rid of the newline.  The line <code>in_line = in_line[:-1]</code> does this for us by dropping the last character.  Next the line <code>[name,number] = string.split(in_line,",")</code> splits the line at the comma into a name and a number.  This is then added to the <code>numbers</code> dictionary.

<P>

<H1><A NAME="SECTION001710000000000000000">
Exercises</A>
</H1>

<P>
Now modify the grades program from section <A HREF="node13.html#firstgrades">11</A> so that is uses file
IO to keep a record of the students.

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html372"
  HREF="node18.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html368"
  HREF="easytut.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html362"
  HREF="node16.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html370"
  HREF="node2.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html373"
  HREF="node18.html">Dealing with the imperfect</A>
<B> Up:</B> <A NAME="tex2html369"
  HREF="easytut.html">Non-Programmers Tutorial For Python</A>
<B> Previous:</B> <A NAME="tex2html363"
  HREF="node16.html">Revenge of the Strings</A>
 &nbsp <B>  <A NAME="tex2html371"
  HREF="node2.html">Contents</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
Josh Cogliati <a href="mailto:jjc@honors.montana.edu">jjc@honors.montana.edu</a> Wikibooks Version: <a href="http://wikibooks.org/wiki/User:Jrincayc/Contents">Wikibooks Non-programmers Python Tutorial Contents</a>
</ADDRESS>
</BODY>
</HTML>
