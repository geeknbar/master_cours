<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/peps/pep-0001.html for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<head>
  <title>PEP 315 -- Enhanced While Loop</title>
  <link rel="STYLESHEET" href="style.css" type="text/css" />
</head>
<body bgcolor="white">

<div class="header">
<table border="0">
  <tr><th>PEP:&nbsp;</th><td>315</td></tr>
  <tr><th>Title:&nbsp;</th><td>Enhanced While Loop</td></tr>
  <tr><th>Version:&nbsp;</th><td>$Revision: 56054 $</td></tr>
  <tr><th>Last-Modified:&nbsp;</th><td><a href="http://svn.python.org/view/peps/trunk/pep-0315.txt">$Date: 2007-06-20 12:19:26 -0700 (Wed, 20 Jun 2007) $</a> </td></tr>
  <tr><th>Author:&nbsp;</th><td>W Isaac Carroll &lt;icarroll&#32;&#97;t&#32;pobox.com&gt;</td></tr>
  <tr><th>Status:&nbsp;</th><td>Deferred</td></tr>
  <tr><th>Type:&nbsp;</th><td>Standards Track</td></tr>
  <tr><th>Content-Type:&nbsp;</th><td><a href="pep-0009.html">text/plain</a> </td></tr>
  <tr><th>Created:&nbsp;</th><td>25-Apr-2003</td></tr>
  <tr><th>Python-Version:&nbsp;</th><td>2.5</td></tr>
  <tr><th>Post-History:&nbsp;</th><td></td></tr>
</table>
</div>
<hr />
<div class="content">
<h3>Abstract</h3>
<pre>
    This PEP proposes adding an optional "do" clause to the beginning
    of the while loop to make loop code clearer and reduce errors
    caused by code duplication.


</pre>
<h3>Notice</h3>
<pre>
    Deferred; see
    <a href="http://mail.python.org/pipermail/python-dev/2006-February/060718.html">http://mail.python.org/pipermail/python-dev/2006-February/060718.html</a>


</pre>
<h3>Motivation</h3>
<pre>
    It is often necessary for some code to be executed before each
    evaluation of the while loop condition.  This code is often
    duplicated outside the loop, as setup code that executes once
    before entering the loop:

        &lt;setup code&gt;
        while &lt;condition&gt;:
            &lt;loop body&gt;
            &lt;setup code&gt;

    The problem is that duplicated code can be a source of errors if
    one instance is changed but the other is not.  Also, the purpose
    of the second instance of the setup code is not clear because it
    comes at the end of the loop.

    It is possible to prevent code duplication by moving the loop
    condition into a helper function, or an if statement in the loop
    body.  However, separating the loop condition from the while
    keyword makes the behavior of the loop less clear:

        def helper(args):
            &lt;setup code&gt;
            return &lt;condition&gt;

        while helper(args):
            &lt;loop body&gt;

    This last form has the additional drawback of requiring the loop's
    else clause to be added to the body of the if statement, further
    obscuring the loop's behavior:

        while True:
            &lt;setup code&gt;
            if not &lt;condition&gt;: break
            &lt;loop body&gt;

    This PEP proposes to solve these problems by adding an optional
    clause to the while loop, which allows the setup code to be
    expressed in a natural way:

        do:
            &lt;setup code&gt;
        while &lt;condition&gt;:
            &lt;loop body&gt;

    This keeps the loop condition with the while keyword where it
    belongs, and does not require code to be duplicated.


</pre>
<h3>Syntax</h3>
<pre>
    The syntax of the while statement

        while_stmt : "while" expression ":" suite
                     ["else" ":" suite]

    is extended as follows:

        while_stmt : ["do" ":" suite]
                     "while" expression ":" suite
                     ["else" ":" suite]


</pre>
<h3>Semantics of break and continue</h3>
<pre>
    In the do-while loop the break statement will behave the same as
    in the standard while loop: It will immediately terminate the loop
    without evaluating the loop condition or executing the else
    clause.

    A continue statement in the do-while loop jumps to the while
    condition check.

    In general, when the while suite is empty (a pass statement),
    the do-while loop and break and continue statements should match
    the semantics of do-while in other languages.

    Likewise, when the do suite is empty, the do-while loop and
    break and continue statements should match behavior found
    in regular while loops.


</pre>
<h3>Future Statement</h3>
<pre>
    Because of the new keyword "do", the statement

        from __future__ import do_while

    will initially be required to use the do-while form.


</pre>
<h3>Implementation</h3>
<pre>
    The first implementation of this PEP can compile the do-while loop
    as an infinite loop with a test that exits the loop.


</pre>
<h3>Copyright</h3>
<pre>
    This document is placed in the public domain.


</pre>
</div>
</body>
</html>
