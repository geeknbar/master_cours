<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>


<link rel='start' href='../index.html' title='Python Documentation Index'>
<link rel="first" href="whatsnew23.html" title='What's New in Python 2.3'>
<link rel='contents' href='contents.html' title="Contents">
<link rel='last' href='about.html' title='About this document...'>
<link rel='help' href='about.html' title='About this document...'>
<LINK REL="next" HREF="node18.html">
<LINK REL="prev" href="section-slices.html">
<LINK REL="parent" HREF="whatsnew23.html">
<LINK REL="next" HREF="node18.html">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name='aesop' content='information'>
<META NAME="description" CONTENT="Other Language Changes">
<META NAME="keywords" CONTENT="whatsnew23">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<title>16 Other Language Changes</title>
<link rel="stylesheet" href="../style.css" type="text/css">
</head>
<body>
<DIV CLASS="navigation">
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td><a rel="prev" title="15 Extended Slices" 
  href="section-slices.html"><img src='../icons/previous.gif'
  border='0' height='32'  alt='Previous Page' width='32'></A></td>
<td><a rel="parent" title="What's New in Python" 
  HREF="whatsnew23.html"><img src='../icons/up.gif'
  border='0' height='32'  alt='Up One Level' width='32'></A></td>
<td><a rel="next" title="17 New, Improved, and" 
  HREF="node18.html"><img src='../icons/next.gif'
  border='0' height='32'  alt='Next Page' width='32'></A></td>
<td align="center" width="100%">What's New in Python 2.3</td>
<td><a rel="contents" title="Table of Contents" 
  href="contents.html"><img src='../icons/contents.gif'
  border='0' height='32'  alt='Contents' width='32'></A></td>
<td><img src='../icons/blank.gif'
  border='0' height='32'  alt='' width='32'></td>
</tr></table>
<b class="navlabel">Previous:</b>
<a class="sectref" rel="prev" href="section-slices.html">15 Extended Slices</A>
<b class="navlabel">Up:</b>
<a class="sectref" rel="parent" HREF="whatsnew23.html">What's New in Python</A>
<b class="navlabel">Next:</b>
<a class="sectref" rel="next" HREF="node18.html">17 New, Improved, and</A>
<br><hr>
</DIV>
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsections</STRONG></a>

<UL CLASS="ChildLinks">
<LI><A href="node17.html#SECTION0001710000000000000000">16.1 String Changes</a>
<LI><A href="node17.html#SECTION0001720000000000000000">16.2 Optimizations</a>
</ul>
<!--End of Table of Child-Links-->
<HR>

<H1><A NAME="SECTION0001700000000000000000">
16 Other Language Changes</A>
</H1>

<P>
Here are all of the changes that Python 2.3 makes to the core Python
language.

<P>

<UL>
<LI>The <tt class="keyword">yield</tt> statement is now always a keyword, as
described in section&nbsp;<A href="section-generators.html#section-generators">2</A> of this document.

<P>
</LI>
<LI>A new built-in function <tt class="function">enumerate()</tt>
was added, as described in section&nbsp;<A href="section-enumerate.html#section-enumerate">7</A> of this
document.

<P>
</LI>
<LI>Two new constants, <tt class="constant">True</tt> and <tt class="constant">False</tt> were
added along with the built-in <tt class="class">bool</tt> type, as described in
section&nbsp;<A href="section-bool.html#section-bool">9</A> of this document.

<P>
</LI>
<LI>The <tt class="function">int()</tt> type constructor will now return a long
integer instead of raising an <tt class="exception">OverflowError</tt> when a string
or floating-point number is too large to fit into an integer.  This
can lead to the paradoxical result that
<code>isinstance(int(<var>expression</var>), int)</code> is false, but that seems
unlikely to cause problems in practice.

<P>
</LI>
<LI>Built-in types now support the extended slicing syntax,
as described in section&nbsp;<A href="section-slices.html#section-slices">15</A> of this document.

<P>
</LI>
<LI>A new built-in function, <tt class="function">sum(<var>iterable</var>, <var>start</var>=0)</tt>, 
adds up the numeric items in the iterable object and returns their sum. 
<tt class="function">sum()</tt> only accepts numbers, meaning that you can't use it
to concatenate a bunch of strings.   (Contributed by Alex
Martelli.)

<P>
</LI>
<LI><code>list.insert(<var>pos</var>, <var>value</var>)</code> used to 
insert <var>value</var> at the front of the list when <var>pos</var> was
negative.  The behaviour has now been changed to be consistent with
slice indexing, so when <var>pos</var> is -1 the value will be inserted
before the last element, and so forth.

<P>
</LI>
<LI><code>list.index(<var>value</var>)</code>, which searches for <var>value</var> 
within the list and returns its index, now takes optional 
<var>start</var> and <var>stop</var> arguments to limit the search to 
only part of the list.

<P>
</LI>
<LI>Dictionaries have a new method, <tt class="method">pop(<var>key</var><big>[</big>,
<var>default</var><big>]</big>)</tt>, that returns the value corresponding to <var>key</var>
and removes that key/value pair from the dictionary.  If the requested
key isn't present in the dictionary, <var>default</var> is returned if it's
specified and <tt class="exception">KeyError</tt> raised if it isn't.

<P>
<div class="verbatim"><pre>
&gt;&gt;&gt; d = {1:2}
&gt;&gt;&gt; d
{1: 2}
&gt;&gt;&gt; d.pop(4)
Traceback (most recent call last):
  File "stdin", line 1, in ?
KeyError: 4
&gt;&gt;&gt; d.pop(1)
2
&gt;&gt;&gt; d.pop(1)
Traceback (most recent call last):
  File "stdin", line 1, in ?
KeyError: 'pop(): dictionary is empty'
&gt;&gt;&gt; d
{}
&gt;&gt;&gt;
</pre></div>

<P>
There's also a new class method, 
<tt class="method">dict.fromkeys(<var>iterable</var>, <var>value</var>)</tt>, that 
creates a dictionary with keys taken from the supplied iterator
<var>iterable</var> and all values set to <var>value</var>, defaulting to
<code>None</code>.  

<P>
(Patches contributed by Raymond Hettinger.)

<P>
Also, the <tt class="function">dict()</tt> constructor now accepts keyword arguments to
simplify creating small dictionaries:

<P>
<div class="verbatim"><pre>
&gt;&gt;&gt; dict(red=1, blue=2, green=3, black=4)
{'blue': 2, 'black': 4, 'green': 3, 'red': 1}
</pre></div>

<P>
(Contributed by Just van&nbsp;Rossum.)       

<P>
</LI>
<LI>The <tt class="keyword">assert</tt> statement no longer checks the <code>__debug__</code>
flag, so you can no longer disable assertions by assigning to <code>__debug__</code>.
Running Python with the <b class="programopt">-O</b> switch will still generate
code that doesn't execute any assertions.

<P>
</LI>
<LI>Most type objects are now callable, so you can use them
to create new objects such as functions, classes, and modules.  (This
means that the <tt class="module">new</tt> module can be deprecated in a future
Python version, because you can now use the type objects available in
the <tt class="module">types</tt> module.)
For example, you can create a new module object with the following code:

<P>
<div class="verbatim"><pre>
&gt;&gt;&gt; import types
&gt;&gt;&gt; m = types.ModuleType('abc','docstring')
&gt;&gt;&gt; m
&lt;module 'abc' (built-in)&gt;
&gt;&gt;&gt; m.__doc__
'docstring'
</pre></div>

<P>
</LI>
<LI>A new warning, <tt class="exception">PendingDeprecationWarning</tt> was added to
indicate features which are in the process of being
deprecated.  The warning will <i>not</i> be printed by default.  To
check for use of features that will be deprecated in the future,
supply <b class="programopt">-Walways::PendingDeprecationWarning::</b> on the
command line or use <tt class="function">warnings.filterwarnings()</tt>.

<P>
</LI>
<LI>The process of deprecating string-based exceptions, as
in <code>raise "Error occurred"</code>, has begun.  Raising a string will
now trigger <tt class="exception">PendingDeprecationWarning</tt>.

<P>
</LI>
<LI>Using <code>None</code> as a variable name will now result in a
<tt class="exception">SyntaxWarning</tt> warning.  In a future version of Python,
<code>None</code> may finally become a keyword.

<P>
</LI>
<LI>The <tt class="method">xreadlines()</tt> method of file objects, introduced in
Python 2.1, is no longer necessary because files now behave as their
own iterator.  <tt class="method">xreadlines()</tt> was originally introduced as a
faster way to loop over all the lines in a file, but now you can
simply write <code>for line in file_obj</code>.  File objects also have a
new read-only <tt class="member">encoding</tt> attribute that gives the encoding used
by the file; Unicode strings written to the file will be automatically 
converted to bytes using the given encoding.

<P>
</LI>
<LI>The method resolution order used by new-style classes has
changed, though you'll only notice the difference if you have a really
complicated inheritance hierarchy.  Classic classes are unaffected by
this change.  Python 2.2 originally used a topological sort of a
class's ancestors, but 2.3 now uses the C3 algorithm as described in
the paper <a class="ulink" href="http://www.webcom.com/haahr/dylan/linearization-oopsla96.html"
  >``A Monotonic Superclass Linearization for
Dylan''</a>.
To understand the motivation for this change, 
read Michele Simionato's article 
<a class="ulink" href="http://www.python.org/2.3/mro.html"
  >``Python 2.3 Method Resolution Order''</a>, or
read the thread on python-dev starting with the message at
<a class="url" href="http://mail.python.org/pipermail/python-dev/2002-October/029035.html">http://mail.python.org/pipermail/python-dev/2002-October/029035.html</a>.
Samuele Pedroni first pointed out the problem and also implemented the
fix by coding the C3 algorithm.

<P>
</LI>
<LI>Python runs multithreaded programs by switching between threads
after executing N bytecodes.  The default value for N has been
increased from 10 to 100 bytecodes, speeding up single-threaded
applications by reducing the switching overhead.  Some multithreaded
applications may suffer slower response time, but that's easily fixed
by setting the limit back to a lower number using
<tt class="function">sys.setcheckinterval(<var>N</var>)</tt>.
The limit can be retrieved with the new 
<tt class="function">sys.getcheckinterval()</tt> function.

<P>
</LI>
<LI>One minor but far-reaching change is that the names of extension
types defined by the modules included with Python now contain the
module and a "<tt class="character">.</tt>" in front of the type name.  For example, in
Python 2.2, if you created a socket and printed its
<tt class="member">__class__</tt>, you'd get this output:

<P>
<div class="verbatim"><pre>
&gt;&gt;&gt; s = socket.socket()
&gt;&gt;&gt; s.__class__
&lt;type 'socket'&gt;
</pre></div>

<P>
In 2.3, you get this:
<div class="verbatim"><pre>
&gt;&gt;&gt; s.__class__
&lt;type '_socket.socket'&gt;
</pre></div>

<P>
</LI>
<LI>One of the noted incompatibilities between old- and new-style
  classes has been removed: you can now assign to the
  <tt class="member">__name__</tt> and <tt class="member">__bases__</tt> attributes of new-style
  classes.  There are some restrictions on what can be assigned to
  <tt class="member">__bases__</tt> along the lines of those relating to assigning to
  an instance's <tt class="member">__class__</tt> attribute.

<P>
</LI>
</UL>

<P>

<H2><A NAME="SECTION0001710000000000000000">
16.1 String Changes</A>
</H2>

<P>

<UL>
<LI>The <tt class="keyword">in</tt> operator now works differently for strings.
Previously, when evaluating <code><var>X</var> in <var>Y</var></code> where <var>X</var>
and <var>Y</var> are strings, <var>X</var> could only be a single character.
That's now changed; <var>X</var> can be a string of any length, and
<code><var>X</var> in <var>Y</var></code> will return <tt class="constant">True</tt> if <var>X</var> is a
substring of <var>Y</var>.  If <var>X</var> is the empty string, the result is
always <tt class="constant">True</tt>.

<P>
<div class="verbatim"><pre>
&gt;&gt;&gt; 'ab' in 'abcd'
True
&gt;&gt;&gt; 'ad' in 'abcd'
False
&gt;&gt;&gt; '' in 'abcd'
True
</pre></div>

<P>
Note that this doesn't tell you where the substring starts; if you
need that information, use the <tt class="method">find()</tt> string method.

<P>
</LI>
<LI>The <tt class="method">strip()</tt>, <tt class="method">lstrip()</tt>, and <tt class="method">rstrip()</tt>
string methods now have an optional argument for specifying the
characters to strip.  The default is still to remove all whitespace
characters:

<P>
<div class="verbatim"><pre>
&gt;&gt;&gt; '   abc '.strip()
'abc'
&gt;&gt;&gt; '&gt;&lt;&gt;&lt;abc&lt;&gt;&lt;&gt;&lt;&gt;'.strip('&lt;&gt;')
'abc'
&gt;&gt;&gt; '&gt;&lt;&gt;&lt;abc&lt;&gt;&lt;&gt;&lt;&gt;\n'.strip('&lt;&gt;')
'abc&lt;&gt;&lt;&gt;&lt;&gt;\n'
&gt;&gt;&gt; u'\u4000\u4001abc\u4000'.strip(u'\u4000')
u'\u4001abc'
&gt;&gt;&gt;
</pre></div>

<P>
(Suggested by Simon Brunning and implemented by Walter D&#246;rwald.)

<P>
</LI>
<LI>The <tt class="method">startswith()</tt> and <tt class="method">endswith()</tt>
string methods now accept negative numbers for the <var>start</var> and <var>end</var>
parameters.

<P>
</LI>
<LI>Another new string method is <tt class="method">zfill()</tt>, originally a
function in the <tt class="module">string</tt> module.  <tt class="method">zfill()</tt> pads a
numeric string with zeros on the left until it's the specified width.
Note that the <code>%</code> operator is still more flexible and powerful
than <tt class="method">zfill()</tt>.

<P>
<div class="verbatim"><pre>
&gt;&gt;&gt; '45'.zfill(4)
'0045'
&gt;&gt;&gt; '12345'.zfill(4)
'12345'
&gt;&gt;&gt; 'goofy'.zfill(6)
'0goofy'
</pre></div>

<P>
(Contributed by Walter D&#246;rwald.)

<P>
</LI>
<LI>A new type object, <tt class="class">basestring</tt>, has been added.
   Both 8-bit strings and Unicode strings inherit from this type, so
   <code>isinstance(obj, basestring)</code> will return <tt class="constant">True</tt> for
   either kind of string.  It's a completely abstract type, so you
   can't create <tt class="class">basestring</tt> instances.

<P>
</LI>
<LI>Interned strings are no longer immortal and will now be
garbage-collected in the usual way when the only reference to them is
from the internal dictionary of interned strings.  (Implemented by
Oren Tirosh.)

<P>
</LI>
</UL>

<P>

<H2><A NAME="SECTION0001720000000000000000">
16.2 Optimizations</A>
</H2>

<P>

<UL>
<LI>The creation of new-style class instances has been made much
faster; they're now faster than classic classes!

<P>
</LI>
<LI>The <tt class="method">sort()</tt> method of list objects has been extensively
rewritten by Tim Peters, and the implementation is significantly
faster.

<P>
</LI>
<LI>Multiplication of large long integers is now much faster thanks
to an implementation of Karatsuba multiplication, an algorithm that
scales better than the O(n*n) required for the grade-school
multiplication algorithm.  (Original patch by Christopher A. Craig,
and significantly reworked by Tim Peters.)

<P>
</LI>
<LI>The <code>SET_LINENO</code> opcode is now gone.  This may provide a
small speed increase, depending on your compiler's idiosyncrasies.
See section&nbsp;<A href="section-other.html#section-other">20</A> for a longer explanation.
(Removed by Michael Hudson.)

<P>
</LI>
<LI><tt class="function">xrange()</tt> objects now have their own iterator, making
<code>for i in xrange(n)</code> slightly faster than
<code>for i in range(n)</code>.  (Patch by Raymond Hettinger.)

<P>
</LI>
<LI>A number of small rearrangements have been made in various
hotspots to improve performance, such as inlining a function or removing
some code.  (Implemented mostly by GvR, but lots of people have
contributed single changes.)    

<P>
</LI>
</UL>

<P>
The net result of the 2.3 optimizations is that Python 2.3 runs the 
pystone benchmark around 25% faster than Python 2.2.

<P>

<DIV CLASS="navigation">
<p><hr>
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td><a rel="prev" title="15 Extended Slices" 
  rel="prev" title="15 Extended Slices" 
  href="section-slices.html"><img src='../icons/previous.gif'
  border='0' height='32'  alt='Previous Page' width='32'></A></td>
<td><a rel="parent" title="What's New in Python" 
  rel="parent" title="What's New in Python" 
  HREF="whatsnew23.html"><img src='../icons/up.gif'
  border='0' height='32'  alt='Up One Level' width='32'></A></td>
<td><a rel="next" title="17 New, Improved, and" 
  rel="next" title="17 New, Improved, and" 
  HREF="node18.html"><img src='../icons/next.gif'
  border='0' height='32'  alt='Next Page' width='32'></A></td>
<td align="center" width="100%">What's New in Python 2.3</td>
<td><a rel="contents" title="Table of Contents" 
  rel="contents" title="Table of Contents" 
  href="contents.html"><img src='../icons/contents.gif'
  border='0' height='32'  alt='Contents' width='32'></A></td>
<td><img src='../icons/blank.gif'
  border='0' height='32'  alt='' width='32'></td>
</tr></table>
<b class="navlabel">Previous:</b>
<a class="sectref" rel="prev" href="section-slices.html">15 Extended Slices</A>
<b class="navlabel">Up:</b>
<a class="sectref" rel="parent" HREF="whatsnew23.html">What's New in Python</A>
<b class="navlabel">Next:</b>
<a class="sectref" rel="next" HREF="node18.html">17 New, Improved, and</A>
<hr>
<span class="release-info">Release 1.00.</span>
</DIV>
<!--End of Navigation Panel-->
<ADDRESS>
See <i><a href="about.html">About this document...</a></i> for information on suggesting changes.
</ADDRESS>
</BODY>
</HTML>
